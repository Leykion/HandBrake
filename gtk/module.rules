$(eval $(call import.MODULE.rules,GTK))

build: gtk.build
install: gtk.install
clean: gtk.clean
xclean: gtk.xclean

gtk.configure: $(GTK.CONFIGURE.stamp)

$(GTK.CONFIGURE.stamp): | $(dir $(GTK.CONFIGURE.stamp))
	set -e; cd $(GTK.src/); NOCONFIGURE=1 ./autogen.sh
	set -e; cd $(GTK.build/); $(call fn.ABSOLUTE,$(GTK.src/))configure \
		PKG_CONFIG_DIR=$(BUILD/)contrib/lib/pkgconfig \
	    CFLAGS="$(call fn.ARGS,GTK.GCC,.g .O)" \
	    LDFLAGS="$(call fn.ARGS,GTK.GCC,?strip .g .O)" \
	    --prefix=$(INSTALL.prefix) \
	    --with-hb=$(call fn.ABSOLUTE,$(BUILD/))
	$(TOUCH.exe) $@

gtk.build: | $(GTK.build/)
gtk.build: $(GTK.CONFIGURE.stamp) $(LIBHB.a)
	+$(MAKE) -C $(GTK.build/)

gtk.install:
	$(MAKE) -C $(GTK.build/) install-strip

gtk.uninstall:
	$(MAKE) -C $(GTK.build/) uninstall

gtk.clean:
	$(MAKE) -C $(GTK.build/) clean

gtk.xclean:
	$(MAKE) -C $(GTK.build/) distclean
	$(RM.exe) -f $(GTK.out)
	$(RM.exe) -fr $(GTK.build/)
