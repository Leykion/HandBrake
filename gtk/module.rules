$(eval $(call import.MODULE.rules,GTK))

build: gtk.build
clean: gtk.clean

gtk.configure: $(GTK.CONFIGURE.stamp)

gtk.build: $(GTK.BUILD.stamp)

$(GTK.CONFIGURE.stamp): | $(dir $(GTK.CONFIGURE.stamp))
	set -e; cd $(GTK.src/); NOCONFIGURE=1 ./autogen.sh
	set -e; cd $(GTK.build/); $(call fn.ABSOLUTE,$(GTK.src/))configure \
	    --with-hb=$(call fn.ABSOLUTE,$(BUILD/))
	$(TOUCH.exe) $@

$(GTK.BUILD.stamp): $(LIBHB.a)
$(GTK.BUILD.stamp): | $(dir $(GTK.BUILD.stamp))
$(GTK.BUILD.stamp): $(GTK.CONFIGURE.stamp)
	+$(MAKE) -C $(GTK.build/)
	$(TOUCH.exe) $@

gtk.install:
	$(MAKE) -C $(GTK.build/) install-strip

gtk.uninstall:
	$(MAKE) -C $(GTK.build/) uninstall

gtk.clean:
	$(MAKE) -C $(GTK.build/) clean
	$(RM.exe) $(GTK.BUILD.stamp)

gtk.xclean:
	$(RM.exe) -f $(GTK.out)
	$(RM.exe) -fr $(GTK.build/)
