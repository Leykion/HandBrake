$(eval $(call import.MODULE.rules,LIBHB))

libhb.build: $(LIBHB.a)

$(LIBHB.a): | $(dir $(LIBHB.a))
$(LIBHB.a): $(LIBHB.c.o)
	$(AR.exe) rsu $@ $^

$(LIBHB.c.o): $(LIBHB.d)
$(LIBHB.c.o): | $(dir $(LIBHB.c.o))
$(LIBHB.c.o): $(BUILD/)%.o: $(SRC/)%.c
	$(call LIBHB.GCC.C_O,$@,$<)

$(LIBHB.m4.out): $(BUILD/)project/handbrake.m4
$(LIBHB.m4.out): | $(dir $(LIBHB.m4.out))
$(LIBHB.m4.out): $(LIBHB.build/)%: $(LIBHB.src/)%.m4
	$(M4.exe) -Iproject $< > $@

$(LIBHB.h.out): | $(dir $(LIBHB.h.out))
$(LIBHB.h.out): $(BUILD/)%: $(SRC/)%
	$(CP.exe) $< $@

libhb.clean:
	$(RM.exe) -f $(LIBHB.out)

###############################################################################

clean: libhb.clean
build: libhb.build
